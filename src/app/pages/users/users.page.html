<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <p class="bienvenido ion-text-right">Bienvenido {{username}}!</p>

  <!-- Lista de Usuarios -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Lista de Usuarios</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let user of users" lines="full">
          <ion-label>
            <h2>{{ user.username }}</h2>
            <p>{{ user.email }} - {{ user.fullname }}</p>
          </ion-label>
          <ion-buttons slot="end">
            <ion-button color="tertiary" (click)="updateUser(user)">
              <ion-icon slot="icon-only" name="create-outline"></ion-icon>
            </ion-button>
            <ion-button color="danger" (click)="deleteUser(user.id)">
              <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
            </ion-button>
          </ion-buttons>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- Formulario para Agregar Nuevo Usuario -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Agregar Nuevo Usuario</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form (ngSubmit)="createUser()" class="form-container">
        <ion-item>
          <ion-label position="floating">Username</ion-label>
          <ion-input type="text" [(ngModel)]="newUser.username" name="username" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Email</ion-label>
          <ion-input type="email" [(ngModel)]="newUser.email" name="email" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Password</ion-label>
          <ion-input type="password" [(ngModel)]="newUser.password" name="password" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="floating">Full Name</ion-label>
          <ion-input type="text" [(ngModel)]="newUser.fullname" name="fullname" required></ion-input>
        </ion-item>

        <ion-item>
          <ion-label>Selecciona Rol</ion-label>
          <ion-select [(ngModel)]="newUser.role" name="role" placeholder="Role" required>
            <ion-select-option value="1">Admin</ion-select-option>
            <ion-select-option value="2">Pasajero</ion-select-option>
            <ion-select-option value="3">Conductor</ion-select-option>
          </ion-select>
        </ion-item>

        <ion-button expand="block" type="submit" color="primary">Agregar Usuario</ion-button>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>

<!-- Opcional: Agregar un estilo personalizado -->
<style>
  .form-container {
    display: flex;
    flex-direction: column;
    gap: 10px;
  }
</style>
