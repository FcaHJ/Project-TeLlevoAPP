<ion-header [translucent]="true">
  <ion-toolbar color="primary">
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button> 
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <p class="bienvenido ion-text-right">Bienvenido {{username}}!</p>
  
  <div class="container">
    <h5 class="viaja-comodo">Viaja cómodo, llega seguro.</h5>

    
    <div class="input-container">
      <ion-input fill="outline" [(ngModel)]="startLocation"  placeholder="Punto de partida" (ionInput)="onSearchChange($event, 'start')"></ion-input>
      <ion-icon name="navigate-sharp" slot="end" class="input-icon"></ion-icon>
    </div>
    
    <ion-list *ngIf="suggestionsStart.length > 0">
      <ion-item *ngFor="let suggestion of suggestionsStart" (click)="selectSuggestion(suggestion, 'start')">
        {{ suggestion.display_name }}
      </ion-item>
    </ion-list>

    <div class="input-container">
      <ion-input fill="outline" [(ngModel)]="endLocation" placeholder="Destino" (ionInput)="onSearchChange($event, 'end')"></ion-input>
    </div>
    <ion-list *ngIf="suggestionsEnd.length > 0">
      <ion-item *ngFor="let suggestion of suggestionsEnd" (click)="selectSuggestion(suggestion, 'end')">
        {{ suggestion.display_name }}
      </ion-item>
    </ion-list>
    <ion-button class="btn-home custom-button" (click)="togglePrices()"(ionInput)="onSearchChange($event, 'end')">
      Ver detalles de ruta
    </ion-button>
    <ion-button class="btn-home" (click)="calculateRoute()">Ver Ruta</ion-button>
    <ion-button class="btn-home custom-button">Programar viaje</ion-button>
    <ion-button (click)="recenterMap()">Centrar en mi ubicación</ion-button>
    <ion-button (click)="clearRoute()">Reiniciar búsqueda</ion-button>

    <ion-list *ngIf="showPrices">
      <ion-card *ngIf="routeDetails">
        <ion-card-header>
          <ion-card-title>Detalles de la ruta</ion-card-title>
        </ion-card-header>
        <ion-card-content>
          <p>Distancia: {{ routeDetails.distanceKm }} km</p>
          <p>Tiempo estimado: {{ routeDetails.durationMin }} minutos</p>
          <p>Precio estimado: ${{ routeDetails.estimatedPrice }}</p>
        </ion-card-content>
      </ion-card>
      
      <ion-card *ngIf="!routeDetails">
        <ion-card-content>
          <p>Selecciona una ruta para ver los detalles.</p>
        </ion-card-content>
      </ion-card>
    </ion-list>
  </div>

  <ion-content>
    <div id="mapId"></div>
  </ion-content>
</ion-content>
